var yodel;(()=>{"use strict";var e={577:function(e,t){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidFieldArgs=void 0;var r=function(e){function t(t){var n=this;return(n=t?e.call(this,"Invalid Field Arguments: Must specify bytes, min/max, or arguments.")||this:e.call(this,"Invalid Field Arguments: Cannot create bit-lookup for Field object not of type 'flags'.")||this).name="InvalidFieldArgs",n}return i(t,e),t}(Error);t.InvalidFieldArgs=r},544:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Field=t.FieldType=void 0;var i=n(577),r=function(){function e(){}return e.int=0,e.str=1,e.bytearray=2,e.flags=3,e}();t.FieldType=r;var o=function(){function e(e,t,n,o,s,a){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=[]),this.min=0,this.max=0,this.args=[],this.name=e,this.type=t,this.bytes=n,this.min=o,this.max=s,this.args=a,n+o+s==0)throw new i.InvalidFieldArgs(!0);if(a.length>0&&t!=r.flags)throw new i.InvalidFieldArgs(!1)}return e.prototype.stringify=function(){return JSON.stringify(this)},e}();t.Field=o},584:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Format=void 0;var n=function(){function e(e,t){void 0===t&&(t=0),this.mtype=0,this.fields=e,this.mtype=t}return e.prototype.stringify=function(){return JSON.stringify({fields:this.fields.toString(),mtype:this.mtype})},e}();t.Format=n},288:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;var n=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n=""),this.fields={},this.payload="",this.format=e,this.fields=t,this.payload=n}return e.prototype.getField=function(e){return this.fields[e]},e.prototype.stringify=function(){return JSON.stringify(this)},e}();t.Section=n},273:(e,t)=>{function n(e){return Math.ceil(Math.log2(e+1))}Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToRepresent=t.bitCount=void 0,t.bitCount=n,t.bytesToRepresent=function(e){return Math.ceil(n(e)/8)}}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToRepresent=e.bitCount=e.Format=e.Section=e.Field=e.FieldType=e.InvalidFieldArgs=e.YodelSocket=void 0;var t=n(288),r=n(584),o=function(){function e(e,t){this.action="",this.kwargs={},this.action=e,this.kwargs=t}return e.prototype.stringify=function(){return JSON.stringify(this)},e}(),s=function(){function e(e,n){void 0===n&&(n=""),this.onmessage=null,this.messageStack=[],this.hostip=e,this.name=n,this.channel=0,this.directSock=new WebSocket(e);var i=this;this.directSock.addEventListener("message",(function(e){!function(e,n){var i,o=JSON.parse(n.data);i="string"in o.kwargs?new t.Section(new r.Format([],0),{"":o.kwargs.string},o.kwargs.string):new t.Section(new r.Format(o.kwargs.fields,o.kwargs.number),o.kwargs.fields,o.kwargs.payload),console.log("TEST: ",i),null!=e.onmessage?e.onmessage(i):e.messageStack.push(i)}(i,e)}))}return e.prototype.setOnConnect=function(e){this.directSock.onopen=e},e.prototype.sendNewFormat=function(e){this.sendRawMessage(new o("createFormat",e))},e.prototype.send=function(e,n,i){void 0===n&&(n=""),void 0===i&&(i="");var r="Basic";e instanceof t.Section?(r="Section",this.sendNewFormat(e.format)):e instanceof Blob&&e.text().then((function(t){e=t})),this.sendRawMessage(new o("send"+r,{payload:e,name:n,group:i,channel:this.channel}))},e.prototype.listen=function(){},e.prototype.addGroup=function(e){this.sendRawMessage(new o("addGroup",{group:e}))},e.prototype.setName=function(e){this.name=e,this.sendRawMessage(new o("setName",{name:e}))},e.prototype.sendRawMessage=function(e){var t=e.stringify();this.directSock.send(t)},e}();e.YodelSocket=s;var a=n(577);Object.defineProperty(e,"InvalidFieldArgs",{enumerable:!0,get:function(){return a.InvalidFieldArgs}});var u=n(544);Object.defineProperty(e,"FieldType",{enumerable:!0,get:function(){return u.FieldType}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return u.Field}});var c=n(288);Object.defineProperty(e,"Section",{enumerable:!0,get:function(){return c.Section}});var d=n(584);Object.defineProperty(e,"Format",{enumerable:!0,get:function(){return d.Format}});var l=n(273);Object.defineProperty(e,"bitCount",{enumerable:!0,get:function(){return l.bitCount}}),Object.defineProperty(e,"bytesToRepresent",{enumerable:!0,get:function(){return l.bytesToRepresent}})})(),yodel=i})();
//# sourceMappingURL=yodel.js.map